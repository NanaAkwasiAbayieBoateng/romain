---
title:   Perspectives for the biocep workbench
author: "Romain François"
date:  2009-02-22
slug:  Perspectives-for-the-biocep-workbench
---
<div class="post-content">
<style>
pre{ 
  border: 1px solid gray;
  font-size: x-small !important ;
}
</style>
<h3>The need for perspectives</h3>

<p>The <a href="http://biocep-distrib.r-forge.r-project.org/">virtual R Workbench</a> of the biocep project uses <a href="http://www.infonode.net/">Info Node</a> as a flexible docking framework, giving the possibility the move parts of the user interface (called views) anywhere. However, views have be to moved manually each time to reconstruct the layout you are using, which to me is one major usability misfeature of the workbench. At the moment, workbench plugins add views by calling the <code>createView</code> method of the <code>RGui</code> interface, which adds the requested view next to the <strong>Working Directory</strong> view of the workbench.</p>

<p>As an example, if I add the view supplied by this <a href="/index.php?post/2009/02/07/a-hello-world-visual-miner-for-the-biocep-workbench">tutorial</a>, it appears as this: </p>

<a href="/public/posts/perspectives/createView.png"><img src="/public/posts/perspectives/.createView_m.jpg" alt="createView.png" style="margin: 0 auto; display: block;" title="createView.png, fév. 2009"></a>

<p>and unless your plugin uses tricks, that is the only place where the view can be added, and you have to move it around to compose the layout you want to use. This is fine if your plugin only defines one view, but if you define many views (such as the power editor plugin), then asking the user to arrange the views each time is not so great.</p>

<p>Typically, programs using flexible docking frameworks (most notably eclipse) also use <em>perspectives</em> as a way to save and load the layout of the user interface. </p>

<h3>Perspectives for the power editor</h3>

<p>I have added support for perspectives in the power editor so that the many views supplied by the power editor are arranged in a useful way when the plugin is started, which can be configured by the user. Here is the default layout: </p>

<a href="/public/posts/perspectives/perspectives.png"><img src="/public/posts/perspectives/.perspectives_m.jpg" alt="perspectives.png" style="margin: 0 auto; display: block;" title="perspectives.png, fév. 2009"></a>

<p>That is stored in this xml file in the pesrepectives directory of the Editor plugin</p>

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span><font color="#0000ff">&lt;</font><font color="#0000ff">RootWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span>  <font color="#0000ff">&lt;</font><font color="#0000ff">WindowBar</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Up</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>  <font color="#0000ff">&lt;</font><font color="#0000ff">WindowBar</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Right</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>  <font color="#0000ff">&lt;</font><font color="#0000ff">WindowBar</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Down</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span>  <font color="#0000ff">&lt;</font><font color="#0000ff">WindowBar</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Left</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span>  <font color="#0000ff">&lt;</font><font color="#0000ff">SplitWindow</font><font color="#0000ff"> </font><font color="#0000ff">horizontal</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">true</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">dividerLocation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0.2</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span>    <font color="#0000ff">&lt;</font><font color="#0000ff">SplitWindow</font><font color="#0000ff"> </font><font color="#0000ff">horizontal</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">false</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">dividerLocation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0.5407166</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   8 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">TabWindow</font><font color="#0000ff"> </font><font color="#0000ff">selected</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Up</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">tabAreaOrientation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Left</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   9 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">JEditDockableView</font><font color="#0000ff"> </font><font color="#0000ff">name</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">vfs.browser</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">File</font><font color="#ff00cc"> </font><font color="#ff00cc">Browser</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  10 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">JEditDockableView</font><font color="#0000ff"> </font><font color="#0000ff">name</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">projectviewer</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Project</font><font color="#ff00cc"> </font><font color="#ff00cc">Viewer</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  11 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">TabWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  12 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">TabWindow</font><font color="#0000ff"> </font><font color="#0000ff">selected</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Up</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">tabAreaOrientation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Left</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  13 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">JEditDockableView</font><font color="#0000ff"> </font><font color="#0000ff">name</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">robjectexplorer</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">R</font><font color="#ff00cc"> </font><font color="#ff00cc">Objects</font><font color="#ff00cc"> </font><font color="#ff00cc">Explorer</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  14 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">TabWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  15 </font></span>    <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">SplitWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  16 </font></span>    <font color="#0000ff">&lt;</font><font color="#0000ff">SplitWindow</font><font color="#0000ff"> </font><font color="#0000ff">horizontal</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">true</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">dividerLocation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0.75</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  17 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">SplitWindow</font><font color="#0000ff"> </font><font color="#0000ff">horizontal</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">false</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">dividerLocation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0.7654723</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  18 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">TabWindow</font><font color="#0000ff"> </font><font color="#0000ff">selected</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Right</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">tabAreaOrientation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Up</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  19 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">JEditView</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  20 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">View</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">R</font><font color="#ff00cc"> </font><font color="#ff00cc">Console</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">urls</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">/opt/biocep/biocep.jar</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">class</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">org.kchine.rpf.gui.ConsolePanel</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  21 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">View</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Main</font><font color="#ff00cc"> </font><font color="#ff00cc">Graphic</font><font color="#ff00cc"> </font><font color="#ff00cc">Device</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">class</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">javax.swing.JPanel</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  22 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">TabWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  23 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">TabWindow</font><font color="#0000ff"> </font><font color="#0000ff">selected</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Right</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">tabAreaOrientation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Down</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  24 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">JEditDockableView</font><font color="#0000ff"> </font><font color="#0000ff">name</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">console</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Console</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  25 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">View</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Working</font><font color="#ff00cc"> </font><font color="#ff00cc">Directory</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">class</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">javax.swing.JPanel</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  26 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">TabWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  27 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">SplitWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  28 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">SplitWindow</font><font color="#0000ff"> </font><font color="#0000ff">horizontal</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">false</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">dividerLocation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0.66</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  29 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">SplitWindow</font><font color="#0000ff"> </font><font color="#0000ff">horizontal</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">false</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">dividerLocation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0.5124378</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  30 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">TabWindow</font><font color="#0000ff"> </font><font color="#0000ff">selected</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Down</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">tabAreaOrientation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Right</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  31 </font></span>            <font color="#0000ff">&lt;</font><font color="#0000ff">JEditDockableView</font><font color="#0000ff"> </font><font color="#0000ff">name</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">sidekick-tree</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Sidekick</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  32 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">TabWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  33 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">TabWindow</font><font color="#0000ff"> </font><font color="#0000ff">selected</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Down</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">tabAreaOrientation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Right</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  34 </font></span>            <font color="#0000ff">&lt;</font><font color="#0000ff">JEditDockableView</font><font color="#0000ff"> </font><font color="#0000ff">name</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">hypersearch-results</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">HyperSearch</font><font color="#ff00cc"> </font><font color="#ff00cc">Results</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  35 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">TabWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  36 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">SplitWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  37 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">TabWindow</font><font color="#0000ff"> </font><font color="#0000ff">selected</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Down</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">tabAreaOrientation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Right</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  38 </font></span>          <font color="#0000ff">&lt;</font><font color="#0000ff">JEditDockableView</font><font color="#0000ff"> </font><font color="#0000ff">name</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">error-list</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Error</font><font color="#ff00cc"> </font><font color="#ff00cc">List</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  39 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">TabWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  40 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">SplitWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  41 </font></span>    <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">SplitWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  42 </font></span>  <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">SplitWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  43 </font></span><font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">RootWindow</font><font color="#0000ff">&gt;</font>
</font></pre>
  
<h3>Implementation of perspectives in the power editor</h3>

<p>I have recently added support for perspectives in the power editor (this feature should really belong to the biocep project itself, but is not high priority to the author at the moment) by using XML. For example, the default layout that appears when the workbench is started</p>

<a href="/public/posts/perspectives/default.png"><img src="/public/posts/perspectives/.default_m.jpg" alt="default.png" style="margin: 0 auto; display: block;" title="default.png, fév. 2009"></a>

<p>can be represented by this perspective</p>

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span><font color="#0000ff">&lt;</font><font color="#0000ff">RootWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span>  <font color="#0000ff">&lt;</font><font color="#0000ff">SplitWindow</font><font color="#0000ff"> </font><font color="#0000ff">horizontal</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">true</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">dividerLocation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0.2</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>    <font color="#0000ff">&lt;</font><font color="#0000ff">View</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">R</font><font color="#ff00cc"> </font><font color="#ff00cc">Console</font><font color="#ff00cc">"</font><font color="#0000ff"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span><font color="#0000ff">  </font><font color="#0000ff">  </font><font color="#0000ff">  </font><font color="#0000ff">urls</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">/opt/biocep/biocep.jar</font><font color="#ff00cc">"</font><font color="#0000ff"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span><font color="#0000ff">  </font><font color="#0000ff">  </font><font color="#0000ff">  </font><font color="#0000ff">class</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">org.kchine.rpf.gui.ConsolePanel</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span>    <font color="#0000ff">&lt;</font><font color="#0000ff">SplitWindow</font><font color="#0000ff"> </font><font color="#0000ff">horizontal</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">false</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">dividerLocation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0.5407166</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">View</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Main</font><font color="#ff00cc"> </font><font color="#ff00cc">Graphic</font><font color="#ff00cc"> </font><font color="#ff00cc">Device</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">class</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">javax.swing.JPanel</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   8 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">TabWindow</font><font color="#0000ff"> </font><font color="#0000ff">selected</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">0</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">direction</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Up</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">tabAreaOrientation</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Up</font><font color="#ff00cc">"</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   9 </font></span>            <font color="#0000ff">&lt;</font><font color="#0000ff">View</font><font color="#0000ff"> </font><font color="#0000ff">title</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">Working</font><font color="#ff00cc"> </font><font color="#ff00cc">Directory</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">class</font><font color="#0000ff">=</font><font color="#ff00cc">"</font><font color="#ff00cc">javax.swing.JPanel</font><font color="#ff00cc">"</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  10 </font></span>      <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">TabWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  11 </font></span>    <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">SplitWindow</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  12 </font></span>  <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">SplitWindow</font><font color="#0000ff">&gt;</font>  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  13 </font></span><font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">RootWindow</font><font color="#0000ff">&gt;</font>   
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  14 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  15 </font></span>          
</font></pre>

<p>Basically, each node of the XML represents one info node window below the root window. Info Node defines a class for each type of window, see the <a href="http://www.infonode.net/documentation/idw/docs/net/infonode/docking/package-summary.html">api</a> for the <code>net.infonode.docking</code> package. Theses are of particular interest: </p>

<ul>
<li>
<a href="http://www.infonode.net/documentation/idw/docs/net/infonode/docking/RootWindow.html">RootWindow</a>: top level container for docking windows</li>
<li>
<a href="http://www.infonode.net/documentation/idw/docs/net/infonode/docking/SplitWindow.html">SplitWindow</a>: A window with a split pane that contains two child windows</li>
<li>
<a href="http://www.infonode.net/documentation/idw/docs/net/infonode/docking/TabWindow.html">TabWindow</a>: A docking window containing a tabbed panel </li>
<li>
<a href="http://www.infonode.net/documentation/idw/docs/net/infonode/docking/View.html">View</a>: A docking window containing a component </li>
</ul>
<p>The implementation of perspectives that is available in the Power Editor plugin relies on two classes for each docking window class, a class that is responsible for exporting the view to an XML node (called FooExporter if the docking window class is Foo), and a class that is responsible for reading the XML representation and recreate the window from it. </p>

<p>The implementation provides importer and exporter classes for all Info Nodes docking window classes, most importantly classes ViewExporter and ViewImporter that dumps the sufficient information about the view into XML and reads this information to recreate the view. Plugins are encouraged to create classes that inherit from View, say MyPluginView and create the classes MyPluginViewExporter and MyPluginViewImporter to handle the information that this view need to store sufficient information as attributes of the &lt;MyPluginView&gt; node</p>

<p>The exporter is the easiest to implement, all the <code>MyPluginView</code> class needs to do is extend the <code>DefaultExporter</code> class and use the <code>setAttribute</code> method somewhere in the constructor. As an example, the constructor for the <code>JEditDockableViewExporter</code> looks like this: </p>

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">13 </font></span>  <font color="#6600cc">/**</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">14 </font></span><font color="#6600cc">  </font><font color="#6600cc"> </font><font color="#6600cc">*</font><font color="#6600cc"> </font><font color="#6600cc">Constructor</font><font color="#6600cc"> </font><font color="#6600cc">for</font><font color="#6600cc"> </font><font color="#6600cc">the</font><font color="#6600cc"> </font><font color="#6600cc">ViewExporter</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">15 </font></span><font color="#6600cc">  </font><font color="#6600cc"> </font><font color="#6600cc">*</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">16 </font></span><font color="#6600cc">  </font><font color="#6600cc"> </font><font color="#6600cc">*</font><font color="#6600cc"> </font><font color="#02b902">@param</font><font color="#02b902"> </font><font color="#cc6600">window</font><font color="#02b902"> </font><font color="#6600cc">The</font><font color="#6600cc"> </font><font color="#6600cc">View</font><font color="#6600cc"> </font><font color="#6600cc">to</font><font color="#6600cc"> </font><font color="#6600cc">stream</font><font color="#6600cc"> </font><font color="#6600cc">to</font><font color="#6600cc"> </font><font color="#6600cc">XML</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">17 </font></span><font color="#6600cc">  </font><font color="#6600cc"> </font><font color="#6600cc">*/</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">18 </font></span>  <font color="#006699"><strong>public</strong></font> <font color="#ff0033">JEditDockableViewExporter</font><font color="#000000"><strong>(</strong></font> JEditDockableView window<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">19 </font></span>    <font color="#cc00cc">super</font><font color="#000000"><strong>(</strong></font> window <font color="#000000"><strong>)</strong></font> ;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">20 </font></span>    <font color="#ff0033">setAttribute</font><font color="#000000"><strong>(</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">name</font><font color="#ff00cc">"</font>, window.<font color="#ff0033">getName</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>)</strong></font> ;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">21 </font></span>    <font color="#ff0033">setAttribute</font><font color="#000000"><strong>(</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">title</font><font color="#ff00cc">"</font>, window.<font color="#ff0033">getTitle</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>)</strong></font> ;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">22 </font></span>  <font color="#000000"><strong>}</strong></font>           
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">23 </font></span>  
</font></pre>

<p>... so that the &lt;JEditDockableView&gt; node will have the attributes <code>title</code> and <code>name</code></p>

<p>To implement custom importers, the easiest way is to extend the <code>ViewImporter</code> class and define the <code>newView</code> method that takes no parameter and builds the view from the attributes, the <code>DefaultImporter<code> defines the <code>getAttribute</code> method that can be used to retrieve an attribute from the xml node. See the implementation of <code>newView</code> for the <code>JEditDockableView</code> class below: </code></code></p>

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">28 </font></span>  <font color="#6600cc">/**</font><font color="#6600cc"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">29 </font></span><font color="#6600cc">  </font><font color="#6600cc"> </font><font color="#6600cc">*</font><font color="#6600cc"> </font><font color="#6600cc">Creates</font><font color="#6600cc"> </font><font color="#6600cc">the</font><font color="#6600cc"> </font><font color="#6600cc">JEditDockableView</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">30 </font></span><font color="#6600cc">  </font><font color="#6600cc"> </font><font color="#6600cc">*</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">31 </font></span><font color="#6600cc">  </font><font color="#6600cc"> </font><font color="#6600cc">*</font><font color="#6600cc"> </font><font color="#02b902">@return</font><font color="#6600cc"> </font><font color="#6600cc">the</font><font color="#6600cc"> </font><font color="#6600cc">JEditDockableView</font><font color="#6600cc"> </font><font color="#6600cc">for</font><font color="#6600cc"> </font><font color="#6600cc">the</font><font color="#6600cc"> </font><font color="#6600cc">&amp;</font><font color="#6600cc">lt</font><font color="#6600cc">;</font><font color="#6600cc">JEditDockableView</font><font color="#6600cc">&amp;</font><font color="#6600cc">gt</font><font color="#6600cc">;</font><font color="#6600cc"> </font><font color="#6600cc">node</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">32 </font></span><font color="#6600cc">  </font><font color="#6600cc"> </font><font color="#6600cc">*/</font>      
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">33 </font></span>  <font color="#66ccff"><strong>@</strong></font><font color="#66ccff"><strong>Override</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">34 </font></span>  <font color="#006699"><strong>public</strong></font> View <font color="#ff0033">newView</font><font color="#000000"><strong>(</strong></font> <font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>throws</strong></font> Exception <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">35 </font></span>    <font color="#006699"><strong>return</strong></font> <font color="#006699"><strong>new</strong></font> <font color="#ff0033">JEditDockableView</font><font color="#000000"><strong>(</strong></font> name <font color="#000000"><strong>)</strong></font> ;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">36 </font></span>  <font color="#000000"><strong>}</strong></font>
</font></pre>

<h3>Future</h3>

<p>At the moment, this feature is implemented in the Power editor only, and even if it could be used outside of it by using some tricks, the best course of action is probably to add the feature into the biocep workbench itself so that all plugins can take advantage of it and potentially arrange views from other plugins as well. We can also imagine these features</p>

<ul>
<li>user specific perspectives</li>
<li>restore the perspective of the previous session</li>
<li>plugin specific perspectives</li>
</ul>
</div>
