---
title:   inline 0.3.5
author: "Romain Fran√ßois"
date:  2010-06-02
slug:  inline-0.3.5
tags:  [ "cplusplus", "CRAN", "inline", "R", "Rcpp" ]
---
<div class="post-content">
<p>The <a href="http://cran.r-project.org/web/packages/inline/index.html">inline</a> package is an amazing, yet simple, package for R. It allows to dynamically (within the R session) define R functions and S4 methods with inlined C/C++/Fortran code.</p>

<p>Together with RUnit, inline powers the entire unit test suite of <a href="http://dirk.eddelbuettel.com/code/rcpp.html">Rcpp</a>. </p>

<p>As agreed with Oleg Sklyar, who maintains inline, we made a few additions to inline to accomodate the needs of the <a href="http://romainfrancois.blog.free.fr/index.php?category/R-package/Rcpp">Rcpp</a> family of packages. </p>

<h3>cxxfunction</h3>

<p>The main addition is <a href="http://finzi.psych.upenn.edu/R/library/inline/html/cxxfunction.html">cxxfunction</a> which is very similar to <a href="http://finzi.psych.upenn.edu/R/library/inline/html/cfunction.html">cfunction</a>, except that it only focuses on C++ code using the <a href="http://finzi.psych.upenn.edu/R/library/base/html/Foreign.html">.Call</a> calling convention. <a href="http://finzi.psych.upenn.edu/R/library/inline/html/cxxfunction.html">cxxfunction</a> uses a plugin system allowing other packages to control the code that is generated before compilation, environment variables, etc ... For example, the next version of 
<a href="http://dirk.eddelbuettel.com/code/rcpp.html">Rcpp</a> defines an inline plugin that takes care of all the details (find the Rcpp include path, link against the Rcpp user library, etc ...) </p>

<p>Here is an example, from the <a href="http://finzi.psych.upenn.edu/R/library/inline/html/cxxfunction.html">cxxfunction</a> help page using the Rcpp plugin (this will only work with the next version of Rcpp, because the current version does not know about this)</p> 

<iframe src="/public/packages/inline/cxx.R.html" width="500" height="100"></iframe>

<p>Here is an example using the plugin from the next version of <a href="http://dirk.eddelbuettel.com/code/rcpp.armadillo.html">RcppArmadillo</a></p>

<iframe src="/public/packages/inline/cxxarma.R.html" width="500" height="120"></iframe>

<h3>package.skeleton</h3>

<p>Another addition to inline concerns the <a href="http://finzi.psych.upenn.edu/R/library/utils/html/package.skeleton.html">package.skeleton</a>. We've made it S4 generic in inline and defined methods for the <strong>CFunc</strong> and <strong>CFuncList</strong> classes. In short, this allows to prototype some code using inline and quickly dump the code into a proper package</p>

<p>For example, here we make two functions using cxxfunction and then generate a package skeleton directly from them</p>

<iframe src="/public/packages/inline/packskel.html" width="500" height="190"></iframe>

<p>Furthermore, the package.skeleton methods are aware of the plugin system, which allows plugin to have some control of additional steps involved in making the package skeleton, such as Makevars files, etc ... </p>


<h3>getDynLib</h3>

<p><strong>getDynLib</strong> has been introduced in this version of inline to grab a reference to the dynamic library associated with a package, a function (CFunc object) generated by inline, or a set of functions (CFuncList object) generated by inline</p>
</div>
