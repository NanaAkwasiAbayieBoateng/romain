---
title:   Search for R mailing list archives with gmane
author: "Romain Fran√ßois"
date:  2009-05-07
slug:  Search-for-R-mailing-list-archives-with-gmane
tags:  [ "R", "rsitesearch" ]
---
<div class="post-content">
<style type="text/css">
pre{
font-size:x-small !important;
border: 1px solid black;
}
</style>

This <a href="http://article.gmane.org/gmane.comp.lang.r.devel/20248">thread</a> on R-devel led me to write these functions to search into R mailing list archives through <a href="http://gmane.org/">gmane</a>. 

<pre><font color="#000000"><font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">This</font><font color="#ff9999"> </font><font color="#ff9999">program</font><font color="#ff9999"> </font><font color="#ff9999">is</font><font color="#ff9999"> </font><font color="#ff9999">free</font><font color="#ff9999"> </font><font color="#ff9999">software:</font><font color="#ff9999"> </font><font color="#ff9999">you</font><font color="#ff9999"> </font><font color="#ff9999">can</font><font color="#ff9999"> </font><font color="#ff9999">redistribute</font><font color="#ff9999"> </font><font color="#ff9999">it</font><font color="#ff9999"> </font><font color="#ff9999">and/or</font><font color="#ff9999"> </font><font color="#ff9999">modify</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">it</font><font color="#ff9999"> </font><font color="#ff9999">under</font><font color="#ff9999"> </font><font color="#ff9999">the</font><font color="#ff9999"> </font><font color="#ff9999">terms</font><font color="#ff9999"> </font><font color="#ff9999">of</font><font color="#ff9999"> </font><font color="#ff9999">the</font><font color="#ff9999"> </font><font color="#ff9999">GNU</font><font color="#ff9999"> </font><font color="#ff9999">General</font><font color="#ff9999"> </font><font color="#ff9999">Public</font><font color="#ff9999"> </font><font color="#ff9999">License</font><font color="#ff9999"> </font><font color="#ff9999">as</font><font color="#ff9999"> </font><font color="#ff9999">published</font><font color="#ff9999"> </font><font color="#ff9999">by</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">the</font><font color="#ff9999"> </font><font color="#ff9999">Free</font><font color="#ff9999"> </font><font color="#ff9999">Software</font><font color="#ff9999"> </font><font color="#ff9999">Foundation,</font><font color="#ff9999"> </font><font color="#ff9999">either</font><font color="#ff9999"> </font><font color="#ff9999">version</font><font color="#ff9999"> </font><font color="#ff9999">3</font><font color="#ff9999"> </font><font color="#ff9999">of</font><font color="#ff9999"> </font><font color="#ff9999">the</font><font color="#ff9999"> </font><font color="#ff9999">License,</font><font color="#ff9999"> </font><font color="#ff9999">or</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">(at</font><font color="#ff9999"> </font><font color="#ff9999">your</font><font color="#ff9999"> </font><font color="#ff9999">option)</font><font color="#ff9999"> </font><font color="#ff9999">any</font><font color="#ff9999"> </font><font color="#ff9999">later</font><font color="#ff9999"> </font><font color="#ff9999">version.</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">This</font><font color="#ff9999"> </font><font color="#ff9999">program</font><font color="#ff9999"> </font><font color="#ff9999">is</font><font color="#ff9999"> </font><font color="#ff9999">distributed</font><font color="#ff9999"> </font><font color="#ff9999">in</font><font color="#ff9999"> </font><font color="#ff9999">the</font><font color="#ff9999"> </font><font color="#ff9999">hope</font><font color="#ff9999"> </font><font color="#ff9999">that</font><font color="#ff9999"> </font><font color="#ff9999">it</font><font color="#ff9999"> </font><font color="#ff9999">will</font><font color="#ff9999"> </font><font color="#ff9999">be</font><font color="#ff9999"> </font><font color="#ff9999">useful,</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">but</font><font color="#ff9999"> </font><font color="#ff9999">WITHOUT</font><font color="#ff9999"> </font><font color="#ff9999">ANY</font><font color="#ff9999"> </font><font color="#ff9999">WARRANTY;</font><font color="#ff9999"> </font><font color="#ff9999">without</font><font color="#ff9999"> </font><font color="#ff9999">even</font><font color="#ff9999"> </font><font color="#ff9999">the</font><font color="#ff9999"> </font><font color="#ff9999">implied</font><font color="#ff9999"> </font><font color="#ff9999">warranty</font><font color="#ff9999"> </font><font color="#ff9999">of</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">MERCHANTABILITY</font><font color="#ff9999"> </font><font color="#ff9999">or</font><font color="#ff9999"> </font><font color="#ff9999">FITNESS</font><font color="#ff9999"> </font><font color="#ff9999">FOR</font><font color="#ff9999"> </font><font color="#ff9999">A</font><font color="#ff9999"> </font><font color="#ff9999">PARTICULAR</font><font color="#ff9999"> </font><font color="#ff9999">PURPOSE.</font><font color="#ff9999"> </font><font color="#ff9999"> </font><font color="#ff9999">See</font><font color="#ff9999"> </font><font color="#ff9999">the</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">GNU</font><font color="#ff9999"> </font><font color="#ff9999">General</font><font color="#ff9999"> </font><font color="#ff9999">Public</font><font color="#ff9999"> </font><font color="#ff9999">License</font><font color="#ff9999"> </font><font color="#ff9999">for</font><font color="#ff9999"> </font><font color="#ff9999">more</font><font color="#ff9999"> </font><font color="#ff9999">details.</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">You</font><font color="#ff9999"> </font><font color="#ff9999">should</font><font color="#ff9999"> </font><font color="#ff9999">have</font><font color="#ff9999"> </font><font color="#ff9999">received</font><font color="#ff9999"> </font><font color="#ff9999">a</font><font color="#ff9999"> </font><font color="#ff9999">copy</font><font color="#ff9999"> </font><font color="#ff9999">of</font><font color="#ff9999"> </font><font color="#ff9999">the</font><font color="#ff9999"> </font><font color="#ff9999">GNU</font><font color="#ff9999"> </font><font color="#ff9999">General</font><font color="#ff9999"> </font><font color="#ff9999">Public</font><font color="#ff9999"> </font><font color="#ff9999">License</font>
<font color="#ff9999">#</font><font color="#ff9999"> </font><font color="#ff9999">along</font><font color="#ff9999"> </font><font color="#ff9999">with</font><font color="#ff9999"> </font><font color="#ff9999">this</font><font color="#ff9999"> </font><font color="#ff9999">program.</font><font color="#ff9999"> </font><font color="#ff9999"> </font><font color="#ff9999">If</font><font color="#ff9999"> </font><font color="#ff9999">not,</font><font color="#ff9999"> </font><font color="#ff9999">see</font><font color="#ff9999"> </font><font color="#ff9999">&lt;http://www.gnu.org/licenses/&gt;.</font>

<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#6600cc">search</font><font color="#6600cc"> </font><font color="#6600cc">on</font><font color="#6600cc"> </font><font color="#6600cc">gmane</font><font color="#6600cc">.</font><font color="#6600cc">org</font><font color="#6600cc"> </font><font color="#6600cc">mailing</font><font color="#6600cc"> </font><font color="#6600cc">list</font><font color="#6600cc"> </font><font color="#6600cc">archives</font>
<font color="#6600cc">#'</font>
<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#02b902">@param</font><font color="#02b902"> </font><font color="#ff0000">string</font><font color="#ff0000"> </font><font color="#6600cc">query</font>
<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#02b902">@param</font><font color="#02b902"> </font><font color="#ff0000">group</font><font color="#ff0000"> </font><font color="#6600cc">search</font><font color="#6600cc"> </font><font color="#6600cc">on</font><font color="#6600cc"> </font><font color="#6600cc">which</font><font color="#6600cc"> </font><font color="#6600cc">gmane</font><font color="#6600cc"> </font><font color="#6600cc">group</font>
<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#02b902">@param</font><font color="#02b902"> </font><font color="#ff0000">author</font><font color="#ff0000"> </font><font color="#6600cc">author</font><font color="#6600cc"> </font><font color="#6600cc">of</font><font color="#6600cc"> </font><font color="#6600cc">the</font><font color="#6600cc"> </font><font color="#6600cc">email</font>
<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#02b902">@param</font><font color="#02b902"> </font><font color="#ff0000">sort</font><font color="#ff0000"> </font><font color="#6600cc">sort</font><font color="#6600cc"> </font><font color="#6600cc">order</font><font color="#6600cc"> </font><font color="#6600cc">criteria</font>
<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#02b902">@param</font><font color="#02b902"> </font><font color="#ff0000">op</font><font color="#ff0000"> </font><font color="#6600cc">how</font><font color="#6600cc"> </font><font color="#6600cc">to</font><font color="#6600cc"> </font><font color="#6600cc">combine</font><font color="#6600cc"> </font><font color="#6600cc">words</font>
<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#02b902">@param</font><font color="#02b902"> </font><font color="#ff0000">r.group</font><font color="#ff0000"> </font><font color="#6600cc">R</font><font color="#6600cc"> </font><font color="#6600cc">related</font><font color="#6600cc"> </font><font color="#6600cc">group</font><font color="#6600cc"> </font><font color="#6600cc">to</font><font color="#6600cc"> </font><font color="#6600cc">use,</font><font color="#6600cc"> </font><font color="#6600cc">the</font><font color="#6600cc"> </font><font color="#6600cc">default</font><font color="#6600cc"> </font><font color="#6600cc">"*"</font><font color="#6600cc"> </font><font color="#6600cc">means</font><font color="#6600cc"> </font><font color="#6600cc">all</font><font color="#6600cc"> </font><font color="#6600cc">r</font><font color="#6600cc"> </font><font color="#6600cc">related</font><font color="#6600cc"> </font><font color="#6600cc">groups</font>
gmaneSearch <font color="#000000"><strong>&lt;-</strong></font> <font color="#006699"><strong>function</strong></font><font color="#000000"><strong>(</strong></font> string, 
    group <font color="#000000"><strong>=</strong></font> <font color="#ff0000">paste</font><font color="#000000"><strong>(</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">gmane.comp.lang.r.</font><font color="#ff00cc">"</font>, r.group, sep <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">"</font><font color="#000000"><strong>)</strong></font>, 
    author <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">"</font>, sort <font color="#000000"><strong>=</strong></font> <font color="#006699"><strong>c</strong></font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">"</font><font color="#ff00cc">relevance</font><font color="#ff00cc">"</font>, <font color="#ff00cc">"</font><font color="#ff00cc">date</font><font color="#ff00cc">"</font>, <font color="#ff00cc">"</font><font color="#ff00cc">revdate</font><font color="#ff00cc">"</font><font color="#000000"><strong>)</strong></font>, 
    op <font color="#000000"><strong>=</strong></font> <font color="#006699"><strong>c</strong></font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">"</font><font color="#ff00cc">and</font><font color="#ff00cc">"</font>, <font color="#ff00cc">"</font><font color="#ff00cc">or</font><font color="#ff00cc">"</font><font color="#000000"><strong>)</strong></font>, 
    r.group <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">*</font><font color="#ff00cc">"</font> <font color="#000000"><strong>)</strong></font><font color="#000000"><strong>{</strong></font>
    
    sort <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff0000">match.arg</font><font color="#000000"><strong>(</strong></font>sort<font color="#000000"><strong>)</strong></font>
    op <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff0000">match.arg</font><font color="#000000"><strong>(</strong></font> op <font color="#000000"><strong>)</strong></font>
    
    url <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff0000">sprintf</font><font color="#000000"><strong>(</strong></font> 
        <font color="#ff00cc">'</font><font color="#ff00cc">http://search.gmane.org/?query=%s&amp;author=%s&amp;group=%s&amp;sort=%s&amp;DEFAULTOP=%s</font><font color="#ff00cc">'</font>, 
            <font color="#ff0000">gsub</font><font color="#000000"><strong>(</strong></font> <font color="#ff00cc">'</font><font color="#ff00cc"> </font><font color="#ff00cc">+</font><font color="#ff00cc">'</font>, <font color="#ff00cc">'</font><font color="#ff00cc">+</font><font color="#ff00cc">'</font>, string<font color="#000000"><strong>)</strong></font>,  author,  group,  sort, op <font color="#000000"><strong>)</strong></font>
    url <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff0000">URLencode</font><font color="#000000"><strong>(</strong></font> url <font color="#000000"><strong>)</strong></font>
    <font color="#ff0000">browseURL</font><font color="#000000"><strong>(</strong></font> url <font color="#000000"><strong>)</strong></font>
<font color="#000000"><strong>}</strong></font>

<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#6600cc">retrieves</font><font color="#6600cc"> </font><font color="#6600cc">the</font><font color="#6600cc"> </font><font color="#6600cc">list</font><font color="#6600cc"> </font><font color="#6600cc">of</font><font color="#6600cc"> </font><font color="#6600cc">gmane</font><font color="#6600cc"> </font><font color="#6600cc">groups</font><font color="#6600cc"> </font><font color="#6600cc">associated</font><font color="#6600cc"> </font><font color="#6600cc">with</font><font color="#6600cc"> </font><font color="#6600cc">a</font><font color="#6600cc"> </font><font color="#6600cc">prefix</font>
<font color="#6600cc">#'</font><font color="#6600cc"> </font>
<font color="#6600cc">#'</font><font color="#6600cc"> </font><font color="#02b902">@param</font><font color="#02b902"> </font><font color="#ff0000">prefix</font><font color="#ff0000"> </font><font color="#6600cc">group</font><font color="#6600cc"> </font><font color="#6600cc">prefix</font>
gmaneGroups <font color="#000000"><strong>&lt;-</strong></font> <font color="#006699"><strong>function</strong></font><font color="#000000"><strong>(</strong></font> prefix <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">gmane.comp.lang.r.</font><font color="#ff00cc">"</font> <font color="#000000"><strong>)</strong></font><font color="#000000"><strong>{</strong></font>
    url <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff0000">URLencode</font><font color="#000000"><strong>(</strong></font> <font color="#ff0000">sprintf</font><font color="#000000"><strong>(</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">http://dir.gmane.org/index.php?prefix=%s</font><font color="#ff00cc">"</font>, prefix<font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>)</strong></font>
    txt <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff0000">grep</font><font color="#000000"><strong>(</strong></font> <font color="#ff00cc">'</font><font color="#ff00cc">^&lt;tr.*&lt;td</font><font color="#ff00cc"> </font><font color="#ff00cc">align=right.*&lt;a</font><font color="#ff00cc">'</font>, <font color="#ff0000">readLines</font><font color="#000000"><strong>(</strong></font> url <font color="#000000"><strong>)</strong></font>, value <font color="#000000"><strong>=</strong></font> <font color="#cc00cc">TRUE</font> <font color="#000000"><strong>)</strong></font>
    
    rx <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff00cc">'</font><font color="#ff00cc">^.*?&lt;a</font><font color="#ff00cc"> </font><font color="#ff00cc">href="(.*?)"&gt;(.*?)&lt;/a&gt;.*&lt;td&gt;(.*?)&lt;/td&gt;.*$</font><font color="#ff00cc">'</font>
    out <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff0000">data.frame</font><font color="#000000"><strong>(</strong></font> 
        url <font color="#000000"><strong>=</strong></font> <font color="#ff0000">gsub</font><font color="#000000"><strong>(</strong></font> rx, <font color="#ff00cc">"</font><font color="#ff00cc">\\1</font><font color="#ff00cc">"</font>, txt <font color="#000000"><strong>)</strong></font>, 
        group <font color="#000000"><strong>=</strong></font> <font color="#ff0000">gsub</font><font color="#000000"><strong>(</strong></font> rx, <font color="#ff00cc">"</font><font color="#ff00cc">\\2</font><font color="#ff00cc">"</font>, txt <font color="#000000"><strong>)</strong></font>,
        description <font color="#000000"><strong>=</strong></font> <font color="#ff0000">gsub</font><font color="#000000"><strong>(</strong></font> rx, <font color="#ff00cc">"</font><font color="#ff00cc">\\3</font><font color="#ff00cc">"</font>, txt <font color="#000000"><strong>)</strong></font>, 
        stringsAsFactors <font color="#000000"><strong>=</strong></font> <font color="#cc00cc">FALSE</font>
        <font color="#000000"><strong>)</strong></font>
    out<font color="#000000"><strong>$</strong></font>group <font color="#000000"><strong>&lt;-</strong></font> <font color="#ff0000">sub</font><font color="#000000"><strong>(</strong></font> <font color="#ff00cc">"</font><font color="#ff00cc">...</font><font color="#ff00cc">"</font>, <font color="#ff00cc">"</font><font color="#ff00cc">.*</font><font color="#ff00cc">"</font>, out<font color="#000000"><strong>$</strong></font>group, fixed <font color="#000000"><strong>=</strong></font> <font color="#cc00cc">TRUE</font> <font color="#000000"><strong>)</strong></font>
    out
<font color="#000000"><strong>}</strong></font>

</font></pre>

<p>So for example: </p>

<pre>
R&gt; gmaneSearch ("browser prompt", author="romain" )
</pre>

pops up <a href="http://search.gmane.org/?query=browser+prompt&amp;author=romain&amp;group=gmane.comp.lang.r.*&amp;sort=relevance&amp;DEFAULTOP=and&amp;xP=Zbrowser&amp;xFILTERS=Gcomp.lang.r.*-Aromain---A">this page</a>
</div>
