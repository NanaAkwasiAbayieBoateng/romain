<html>
<head>
<title>rsvnlog.R</title>
<style type="text/css"><!--
body{
	font-size: x-small !important ;
}
.syntax-NULL {
  color: #000000;
}
.syntax-COMMENT1 {
  color: #a19d9d;
}
.syntax-COMMENT2 {
  color: #ff8400;
}
.syntax-COMMENT3 {
  color: #6600cc;
}
.syntax-COMMENT4 {
  color: #cc6600;
}
.syntax-DIGIT {
  color: #ff0000;
}
.syntax-FUNCTION {
  color: #ff0000;
}
.syntax-INVALID {
  background: #000000;
  color: #ffff00;
  font-weight: bold;
  font-style: italic;
}
.syntax-KEYWORD1 {
  color: #006699;
  font-weight: bold;
}
.syntax-KEYWORD2 {
  color: #009966;
  font-weight: bold;
}
.syntax-KEYWORD3 {
  color: #33cc00;
  font-weight: bold;
}
.syntax-KEYWORD4 {
  color: #6633ff;
  font-weight: bold;
}
.syntax-LABEL {
  color: #02b902;
}
.syntax-LITERAL1 {
  color: #ffc000;
}
.syntax-LITERAL2 {
  color: #cc00cc;
}
.syntax-LITERAL3 {
  color: #9900cc;
}
.syntax-LITERAL4 {
  color: #6600cc;
  font-weight: bold;
  font-style: italic;
}
.syntax-MARKUP {
  color: #0000ff;
}
.syntax-OPERATOR {
  color: #000000;
  font-weight: bold;
}


--></style>
</head>
<body bgcolor="#ffffff">
<pre><span class="syntax0"><span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1">!/bin/env</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">Rscript</span>

<span class="syntax-COMMENT2">###</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">to</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">fetch</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">the</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">data</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">directlry</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">from</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">the</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">svn</span><span class="syntax-COMMENT2"> </span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">system(</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">&quot;svn</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">log</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">-v</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">https://svn.r-project.org/R</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">&gt;</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">rsvn.log&quot;</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">)</span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span>
<span class="syntax-COMMENT2">###</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">or</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">download</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">it</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">from</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">my</span><span class="syntax-COMMENT2"> </span><span class="syntax-COMMENT2">website</span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">download.file(</span><span class="syntax-COMMENT1"> </span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">&quot;http://addictedtor.free.fr/misc/R50000/rsvn.log&quot;,</span><span class="syntax-COMMENT1"> </span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">dest</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">=</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">&quot;rsvn.log&quot;</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">)</span>

<span class="syntax-COMMENT3">#'</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">get</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">the</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">extension</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">of</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">the</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">files</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">if</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">they</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">have</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">one</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">or</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">&quot;</span><span class="syntax-COMMENT3">&quot;</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">otherwise</span>
getExtension <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">function</span><span class="syntax-OPERATOR">(</span> files <span class="syntax-OPERATOR">)</span><span class="syntax-OPERATOR">{</span>
    out <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">character</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">length</span><span class="syntax-OPERATOR">(</span>files<span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
    has.ext <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">grepl</span><span class="syntax-OPERATOR">(</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">[.]</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-FUNCTION">basename</span><span class="syntax-OPERATOR">(</span>files<span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
    out<span class="syntax-OPERATOR">[</span> has.ext <span class="syntax-OPERATOR">]</span> <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sub</span><span class="syntax-OPERATOR">(</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">^.*\\.(.*?)$</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">\\1</span><span class="syntax-LITERAL1">&quot;</span>, files<span class="syntax-OPERATOR">[</span>has.ext<span class="syntax-OPERATOR">]</span>, perl <span class="syntax-OPERATOR">=</span> T <span class="syntax-OPERATOR">)</span>
    out
<span class="syntax-OPERATOR">}</span>

<span class="syntax-COMMENT3">#'</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">process</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">one</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">svn</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">log</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">item</span><span class="syntax-COMMENT3">,</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">something</span><span class="syntax-COMMENT3"> </span><span class="syntax-COMMENT3">like</span><span class="syntax-COMMENT3">:</span><span class="syntax-COMMENT3"> </span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">------------------------------------------------------------------------</span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">r50000</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">|</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">ripley</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">|</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">2009-10-09</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">10:34:17</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">+0200</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">(Fri,</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">09</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">Oct</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">2009)</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">|</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">1</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">line</span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">Changed</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">paths:</span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">M</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">/branches/R-2-10-branch/src/library/stats/R/plot.lm.R</span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">port</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">r49999</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">from</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">trunk</span>
process_chunk <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">function</span><span class="syntax-OPERATOR">(</span> txt <span class="syntax-OPERATOR">)</span><span class="syntax-OPERATOR">{</span>
    <span class="syntax-FUNCTION">if</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">length</span><span class="syntax-OPERATOR">(</span> txt <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">==</span> 1L <span class="syntax-OPERATOR">)</span> <span class="syntax-FUNCTION">return</span><span class="syntax-OPERATOR">(</span> NULL <span class="syntax-OPERATOR">)</span>
    
    header_line <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">strsplit</span><span class="syntax-OPERATOR">(</span> txt<span class="syntax-OPERATOR">[</span>2L<span class="syntax-OPERATOR">]</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1"> </span><span class="syntax-LITERAL1">|</span><span class="syntax-LITERAL1"> </span><span class="syntax-LITERAL1">&quot;</span>, fixed<span class="syntax-OPERATOR">=</span>TRUE <span class="syntax-OPERATOR">)</span><span class="syntax-OPERATOR">[</span><span class="syntax-OPERATOR">[</span><span class="syntax-DIGIT">1</span><span class="syntax-OPERATOR">]</span><span class="syntax-OPERATOR">]</span><span class="syntax-OPERATOR">[</span> <span class="syntax-FUNCTION">c</span><span class="syntax-OPERATOR">(</span>1L, 2L, 3L<span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">]</span>
    
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">revision</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">number</span>
    revision <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">substring</span><span class="syntax-OPERATOR">(</span> header_line<span class="syntax-OPERATOR">[</span><span class="syntax-DIGIT">1</span><span class="syntax-OPERATOR">]</span>, <span class="syntax-DIGIT">2</span> <span class="syntax-OPERATOR">)</span>
    
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">who</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">commited</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">the</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">revision</span>
    author <span class="syntax-OPERATOR">&lt;-</span> header_line<span class="syntax-OPERATOR">[</span><span class="syntax-DIGIT">2</span><span class="syntax-OPERATOR">]</span>
    
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">these</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">are</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">uninteresting</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">automatic</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">commits</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">(only</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">data-stamp</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">is</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">involved)</span>
    <span class="syntax-FUNCTION">if</span><span class="syntax-OPERATOR">(</span> author <span class="syntax-OPERATOR">%</span><span class="syntax-OPERATOR">in</span><span class="syntax-OPERATOR">%</span> <span class="syntax-FUNCTION">c</span><span class="syntax-OPERATOR">(</span><span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">apache</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">root</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-FUNCTION">return</span><span class="syntax-OPERATOR">(</span>NULL<span class="syntax-OPERATOR">)</span>
    
    date     <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">substring</span><span class="syntax-OPERATOR">(</span> header_line<span class="syntax-OPERATOR">[</span><span class="syntax-DIGIT">3</span><span class="syntax-OPERATOR">]</span>, <span class="syntax-DIGIT">1</span>, <span class="syntax-DIGIT">10</span> <span class="syntax-OPERATOR">)</span>
    
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">process</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">lines</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">associated</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">with</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">files</span>
    file_lines <span class="syntax-OPERATOR">&lt;-</span> txt<span class="syntax-OPERATOR">[</span> seq.<span class="syntax-FUNCTION">int</span><span class="syntax-OPERATOR">(</span> 4L, <span class="syntax-FUNCTION">which</span><span class="syntax-OPERATOR">(</span> txt <span class="syntax-OPERATOR">==</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span><span class="syntax-OPERATOR">[</span>1L<span class="syntax-OPERATOR">]</span> <span class="syntax-OPERATOR">-</span> 1L <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">]</span>
    file_lines <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">strsplit</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">sub</span><span class="syntax-OPERATOR">(</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">^</span><span class="syntax-LITERAL1"> </span><span class="syntax-LITERAL1">+</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">&quot;</span>, file_lines<span class="syntax-OPERATOR">)</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1"> </span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span>
    
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">M,</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">A,</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">D,</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">...</span>
    actions <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sapply</span><span class="syntax-OPERATOR">(</span> file_lines, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">[</span><span class="syntax-LITERAL1">&quot;</span>, 1L <span class="syntax-OPERATOR">)</span>
    
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">the</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">files</span>
    files   <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sapply</span><span class="syntax-OPERATOR">(</span> file_lines, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">[</span><span class="syntax-LITERAL1">&quot;</span>, 2L <span class="syntax-OPERATOR">)</span>
    
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">we</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">format</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">the</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">result</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">as</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">a</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">matrix</span>
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">this</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">is</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">much</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">more</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">efficient</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">than</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">formatting</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">as</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">a</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">data</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">frame</span>
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">at</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">that</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">stage</span>
    nlines  <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">length</span><span class="syntax-OPERATOR">(</span> actions <span class="syntax-OPERATOR">)</span>
    <span class="syntax-FUNCTION">matrix</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">c</span><span class="syntax-OPERATOR">(</span> 
        rep.<span class="syntax-FUNCTION">int</span><span class="syntax-OPERATOR">(</span> revision, nlines <span class="syntax-OPERATOR">)</span>, 
        rep.<span class="syntax-FUNCTION">int</span><span class="syntax-OPERATOR">(</span> author, nlines <span class="syntax-OPERATOR">)</span>, 
        rep.<span class="syntax-FUNCTION">int</span><span class="syntax-OPERATOR">(</span> date, nlines <span class="syntax-OPERATOR">)</span>, 
        actions, 
        files <span class="syntax-OPERATOR">)</span>, nrow <span class="syntax-OPERATOR">=</span> nlines <span class="syntax-OPERATOR">)</span>
    
<span class="syntax-OPERATOR">}</span>

<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">bind</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">all</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">results</span>
data <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">local</span><span class="syntax-OPERATOR">(</span> <span class="syntax-OPERATOR">{</span>
    lines <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">readLines</span><span class="syntax-OPERATOR">(</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">rsvn.log</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span>
    index <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">cumsum</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">grepl</span><span class="syntax-OPERATOR">(</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">^-+$</span><span class="syntax-LITERAL1">&quot;</span>, lines <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
    commits <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">split</span><span class="syntax-OPERATOR">(</span> lines, index <span class="syntax-OPERATOR">)</span>
    do.<span class="syntax-FUNCTION">call</span><span class="syntax-OPERATOR">(</span> rbind, <span class="syntax-FUNCTION">lapply</span><span class="syntax-OPERATOR">(</span> commits, process_chunk <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
<span class="syntax-OPERATOR">}</span> <span class="syntax-OPERATOR">)</span>
<span class="syntax-FUNCTION">colnames</span><span class="syntax-OPERATOR">(</span> data <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">c</span><span class="syntax-OPERATOR">(</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">revision</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">author</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">date</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">action</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">file</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span>

<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">extract</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">some</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">more</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">information</span>
data <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">within</span><span class="syntax-OPERATOR">(</span> as.data.<span class="syntax-FUNCTION">frame</span><span class="syntax-OPERATOR">(</span> data, stringsAsFactors <span class="syntax-OPERATOR">=</span> FALSE <span class="syntax-OPERATOR">)</span>, <span class="syntax-OPERATOR">{</span>
    date <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">Date</span><span class="syntax-OPERATOR">(</span> date, format <span class="syntax-OPERATOR">=</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%Y-%m-%d</span><span class="syntax-LITERAL1">&quot;</span><span class="syntax-OPERATOR">)</span> 
    revision <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">integer</span><span class="syntax-OPERATOR">(</span> revision <span class="syntax-OPERATOR">)</span>
    extension <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">getExtension</span><span class="syntax-OPERATOR">(</span> file <span class="syntax-OPERATOR">)</span>
    weekday  <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">weekdays</span><span class="syntax-OPERATOR">(</span> date <span class="syntax-OPERATOR">)</span>
    year <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">integer</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">format</span><span class="syntax-OPERATOR">(</span> date, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%Y</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
    month <span class="syntax-OPERATOR">&lt;-</span> month.abb<span class="syntax-OPERATOR">[</span> as.<span class="syntax-FUNCTION">integer</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">format</span><span class="syntax-OPERATOR">(</span> date, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%m</span><span class="syntax-LITERAL1">&quot;</span><span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">]</span>
    
    <span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">deal</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">with</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">name</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">switchers</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">(thanks</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">dirk)</span>
    author<span class="syntax-OPERATOR">[</span> author <span class="syntax-OPERATOR">==</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">thomas</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">]</span> <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">tlumley</span><span class="syntax-LITERAL1">&quot;</span>
    author<span class="syntax-OPERATOR">[</span> author <span class="syntax-OPERATOR">==</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">paul</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">]</span> <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">murrell</span><span class="syntax-LITERAL1">&quot;</span>
    author<span class="syntax-OPERATOR">[</span> author <span class="syntax-OPERATOR">==</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">martyn</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">]</span> <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">plummer</span><span class="syntax-LITERAL1">&quot;</span>
    
<span class="syntax-OPERATOR">}</span> <span class="syntax-OPERATOR">)</span>
data <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">subset</span><span class="syntax-OPERATOR">(</span> data, date <span class="syntax-OPERATOR">&gt;</span> as.<span class="syntax-FUNCTION">Date</span><span class="syntax-OPERATOR">(</span><span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">1997-01-01</span><span class="syntax-LITERAL1">&quot;</span><span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>

<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">a</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">simpler</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">data</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">set,</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">with</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">only</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">one</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">entry</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">per</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">commit</span>
simple <span class="syntax-OPERATOR">&lt;-</span> data<span class="syntax-OPERATOR">[</span> 
    <span class="syntax-OPERATOR">!</span><span class="syntax-FUNCTION">duplicated</span><span class="syntax-OPERATOR">(</span>data<span class="syntax-OPERATOR">$</span>revision<span class="syntax-OPERATOR">)</span>, 
    <span class="syntax-FUNCTION">c</span><span class="syntax-OPERATOR">(</span><span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">revision</span><span class="syntax-LITERAL1">&quot;</span>,<span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">author</span><span class="syntax-LITERAL1">&quot;</span>,<span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">date</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">month</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">year</span><span class="syntax-LITERAL1">&quot;</span>, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">weekday</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">]</span>

<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">aggregate</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">the</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">data</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">daily</span>
daydata <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">local</span><span class="syntax-OPERATOR">(</span> <span class="syntax-OPERATOR">{</span>
    tab <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">table</span><span class="syntax-OPERATOR">(</span> simple<span class="syntax-OPERATOR">$</span>date <span class="syntax-OPERATOR">)</span>
    <span class="syntax-FUNCTION">within</span><span class="syntax-OPERATOR">(</span> data.<span class="syntax-FUNCTION">frame</span><span class="syntax-OPERATOR">(</span> date <span class="syntax-OPERATOR">=</span> as.<span class="syntax-FUNCTION">Date</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">names</span><span class="syntax-OPERATOR">(</span>tab<span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>, commits <span class="syntax-OPERATOR">=</span> as.<span class="syntax-FUNCTION">integer</span><span class="syntax-OPERATOR">(</span>tab<span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>, <span class="syntax-OPERATOR">{</span>
        month <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">integer</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">format</span><span class="syntax-OPERATOR">(</span> date, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%m</span><span class="syntax-LITERAL1">&quot;</span><span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
        weekday  <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">weekdays</span><span class="syntax-OPERATOR">(</span> date <span class="syntax-OPERATOR">)</span>
        year <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">integer</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">format</span><span class="syntax-OPERATOR">(</span> date, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%Y</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
    <span class="syntax-OPERATOR">}</span> <span class="syntax-OPERATOR">)</span>
<span class="syntax-OPERATOR">}</span> <span class="syntax-OPERATOR">)</span>

<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">aggregate</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">data</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">by</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">day</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">and</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">author</span>
day_author_data <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">with</span><span class="syntax-OPERATOR">(</span> simple, <span class="syntax-FUNCTION">aggregate</span><span class="syntax-OPERATOR">(</span> revision, 
    <span class="syntax-FUNCTION">list</span><span class="syntax-OPERATOR">(</span> date <span class="syntax-OPERATOR">=</span> date, author <span class="syntax-OPERATOR">=</span> author <span class="syntax-OPERATOR">)</span>, length <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
<span class="syntax-FUNCTION">names</span><span class="syntax-OPERATOR">(</span> day_author_data <span class="syntax-OPERATOR">)</span><span class="syntax-OPERATOR">[</span><span class="syntax-DIGIT">3</span><span class="syntax-OPERATOR">]</span> <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">commits</span><span class="syntax-LITERAL1">&quot;</span>
day_author_data<span class="syntax-OPERATOR">$</span>date <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">Date</span><span class="syntax-OPERATOR">(</span> day_author_data<span class="syntax-OPERATOR">$</span>date <span class="syntax-OPERATOR">)</span>
day_author_data<span class="syntax-OPERATOR">$</span>month <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">integer</span><span class="syntax-OPERATOR">(</span><span class="syntax-FUNCTION">format</span><span class="syntax-OPERATOR">(</span> day_author_data<span class="syntax-OPERATOR">$</span>date, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%m</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>
day_author_data<span class="syntax-OPERATOR">$</span>year <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">integer</span><span class="syntax-OPERATOR">(</span><span class="syntax-FUNCTION">format</span><span class="syntax-OPERATOR">(</span> day_author_data<span class="syntax-OPERATOR">$</span>date, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%Y</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>

<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">and</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">monthly</span>
monthdata <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">local</span><span class="syntax-OPERATOR">(</span><span class="syntax-OPERATOR">{</span>
    ym <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sprintf</span><span class="syntax-OPERATOR">(</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%04d-%02d</span><span class="syntax-LITERAL1">&quot;</span>, daydata<span class="syntax-OPERATOR">$</span>year, daydata<span class="syntax-OPERATOR">$</span>month <span class="syntax-OPERATOR">)</span>
    rx <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">^(\\d+)-(\\d+)$</span><span class="syntax-LITERAL1">&quot;</span>
    ag <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">aggregate</span><span class="syntax-OPERATOR">(</span> daydata<span class="syntax-OPERATOR">$</span>commits, <span class="syntax-FUNCTION">list</span><span class="syntax-OPERATOR">(</span>date <span class="syntax-OPERATOR">=</span> ym<span class="syntax-OPERATOR">)</span>, sum <span class="syntax-OPERATOR">)</span>
    <span class="syntax-FUNCTION">names</span><span class="syntax-OPERATOR">(</span>ag<span class="syntax-OPERATOR">)</span><span class="syntax-OPERATOR">[</span><span class="syntax-DIGIT">2</span><span class="syntax-OPERATOR">]</span> <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">commits</span><span class="syntax-LITERAL1">&quot;</span>
    <span class="syntax-FUNCTION">within</span><span class="syntax-OPERATOR">(</span> ag, <span class="syntax-OPERATOR">{</span>
        year  <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sub</span><span class="syntax-OPERATOR">(</span> rx, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">\\1</span><span class="syntax-LITERAL1">&quot;</span>, date <span class="syntax-OPERATOR">)</span>
        month <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sub</span><span class="syntax-OPERATOR">(</span> rx, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">\\2</span><span class="syntax-LITERAL1">&quot;</span>, date <span class="syntax-OPERATOR">)</span>
        date  <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">Date</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">paste</span><span class="syntax-OPERATOR">(</span> date, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">01</span><span class="syntax-LITERAL1">&quot;</span>, sep <span class="syntax-OPERATOR">=</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">-</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span>, format <span class="syntax-OPERATOR">=</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%Y-%m-%d</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span> 
    <span class="syntax-OPERATOR">}</span> <span class="syntax-OPERATOR">)</span>
<span class="syntax-OPERATOR">}</span><span class="syntax-OPERATOR">)</span>

month_author_data <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">local</span><span class="syntax-OPERATOR">(</span><span class="syntax-OPERATOR">{</span>
    ym <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sprintf</span><span class="syntax-OPERATOR">(</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%04d-%02d</span><span class="syntax-LITERAL1">&quot;</span>, day_author_data<span class="syntax-OPERATOR">$</span>year, day_author_data<span class="syntax-OPERATOR">$</span>month <span class="syntax-OPERATOR">)</span>
    rx <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">^(\\d+)-(\\d+)$</span><span class="syntax-LITERAL1">&quot;</span>
    ag <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">aggregate</span><span class="syntax-OPERATOR">(</span> day_author_data<span class="syntax-OPERATOR">$</span>commits, <span class="syntax-FUNCTION">list</span><span class="syntax-OPERATOR">(</span>date <span class="syntax-OPERATOR">=</span> ym, author <span class="syntax-OPERATOR">=</span> day_author_data<span class="syntax-OPERATOR">$</span>author<span class="syntax-OPERATOR">)</span>, sum <span class="syntax-OPERATOR">)</span>
    <span class="syntax-FUNCTION">names</span><span class="syntax-OPERATOR">(</span>ag<span class="syntax-OPERATOR">)</span><span class="syntax-OPERATOR">[</span><span class="syntax-DIGIT">3</span><span class="syntax-OPERATOR">]</span> <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">commits</span><span class="syntax-LITERAL1">&quot;</span>
    <span class="syntax-FUNCTION">within</span><span class="syntax-OPERATOR">(</span> ag, <span class="syntax-OPERATOR">{</span>
        year  <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sub</span><span class="syntax-OPERATOR">(</span> rx, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">\\1</span><span class="syntax-LITERAL1">&quot;</span>, date <span class="syntax-OPERATOR">)</span>
        month <span class="syntax-OPERATOR">&lt;-</span> <span class="syntax-FUNCTION">sub</span><span class="syntax-OPERATOR">(</span> rx, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">\\2</span><span class="syntax-LITERAL1">&quot;</span>, date <span class="syntax-OPERATOR">)</span>
        date  <span class="syntax-OPERATOR">&lt;-</span> as.<span class="syntax-FUNCTION">Date</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">paste</span><span class="syntax-OPERATOR">(</span> date, <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">01</span><span class="syntax-LITERAL1">&quot;</span>, sep <span class="syntax-OPERATOR">=</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">-</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span>, format <span class="syntax-OPERATOR">=</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">%Y-%m-%d</span><span class="syntax-LITERAL1">&quot;</span> <span class="syntax-OPERATOR">)</span> 
    <span class="syntax-OPERATOR">}</span> <span class="syntax-OPERATOR">)</span>
<span class="syntax-OPERATOR">}</span><span class="syntax-OPERATOR">)</span>


<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">calculate</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">the</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">number</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">of</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">files</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">in</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">the</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">distribution</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">at</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">each</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">revision</span>
<span class="syntax-COMMENT1">#</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">(sum</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">of</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">&quot;A&quot;dded</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">files</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">so</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">far</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">minus</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">sum</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">of</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">&quot;D&quot;eleted</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">files</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">so</span><span class="syntax-COMMENT1"> </span><span class="syntax-COMMENT1">far)</span>
nfiles_data <span class="syntax-OPERATOR">&lt;-</span> data.<span class="syntax-FUNCTION">frame</span><span class="syntax-OPERATOR">(</span> 
    revision <span class="syntax-OPERATOR">=</span> <span class="syntax-FUNCTION">sort</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">unique</span><span class="syntax-OPERATOR">(</span>data<span class="syntax-OPERATOR">$</span>revision <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>,
    nfiles   <span class="syntax-OPERATOR">=</span> <span class="syntax-FUNCTION">cumsum</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">tapply</span><span class="syntax-OPERATOR">(</span> data<span class="syntax-OPERATOR">$</span>action, data<span class="syntax-OPERATOR">$</span>revision, <span class="syntax-FUNCTION">function</span><span class="syntax-OPERATOR">(</span>x<span class="syntax-OPERATOR">)</span><span class="syntax-OPERATOR">{</span> 
        <span class="syntax-FUNCTION">sum</span><span class="syntax-OPERATOR">(</span> x <span class="syntax-OPERATOR">==</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">A</span><span class="syntax-LITERAL1">&quot;</span>, na.rm <span class="syntax-OPERATOR">=</span> TRUE<span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">-</span> <span class="syntax-FUNCTION">sum</span><span class="syntax-OPERATOR">(</span>x <span class="syntax-OPERATOR">==</span> <span class="syntax-LITERAL1">&quot;</span><span class="syntax-LITERAL1">D</span><span class="syntax-LITERAL1">&quot;</span>, na.rm <span class="syntax-OPERATOR">=</span> TRUE<span class="syntax-OPERATOR">)</span> 
    <span class="syntax-OPERATOR">}</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>, 
    date     <span class="syntax-OPERATOR">=</span> as.<span class="syntax-FUNCTION">Date</span><span class="syntax-OPERATOR">(</span> <span class="syntax-FUNCTION">tapply</span><span class="syntax-OPERATOR">(</span> as.<span class="syntax-FUNCTION">character</span><span class="syntax-OPERATOR">(</span>data<span class="syntax-OPERATOR">$</span>date<span class="syntax-OPERATOR">)</span>, data<span class="syntax-OPERATOR">$</span>revision, head, <span class="syntax-DIGIT">1</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>, 
    author <span class="syntax-OPERATOR">=</span> <span class="syntax-FUNCTION">tapply</span><span class="syntax-OPERATOR">(</span> data<span class="syntax-OPERATOR">$</span>author, data<span class="syntax-OPERATOR">$</span>revision, head, <span class="syntax-DIGIT">1</span> <span class="syntax-OPERATOR">)</span> <span class="syntax-OPERATOR">)</span>

</span></pre>
</body>
</html>

